---
layout: post
title: Express êµ¬ì¡°
subtitle: express-generator, ë¯¸ë“¤ì›¨ì–´, ë¼ìš°í„°
excerpt_image: https://grepp-programmers.s3.amazonaws.com/production/file_resource/6737/Dev_Thumnail_Web_Full_Stack_4th.png
categories: Programmers
tags: [Programmers]
---

## express

- ë‚´ê°€ ë§Œë“¤ê³  ì‹¶ì€ ì›¹ ì„œë¹„ìŠ¤ êµ¬í˜„ì„ ìœ„í•´ í•„ìš”í•œ ëª¨ë“  ì¼ì„ í‹€ ì•ˆì—ì„œ í•  ìˆ˜ ìˆìŒ.

## êµ¬ì¡°

- express-generatorë¥¼ globalë¡œ ì„¤ì¹˜

```powershell
npm install express-generator -g
```

### âš ï¸ì—ëŸ¬ ë°œìƒ

â†’ express : ì´ ì‹œìŠ¤í…œì—ì„œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ íŒŒì¼ì„ ë¡œë“œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

### í•´ê²° (Window)

- Powershellì„ ê´€ë¦¬ìë¡œ ì ‘ì†í•˜ì—¬ ì‹¤í–‰ í›„ ë‹¤ìŒ ì½”ë“œ ì‘ì„±.
    - Powershell ì•„ì´ì½˜ì„ ìš°í´ë¦­ í›„, ê´€ë¦¬ìë¡œ ì‹¤í–‰ í´ë¦­.
    1.  Get-ExecutionPolicy ì…ë ¥í•˜ë©´ Restrictedë¼ê³  ëœ° ê²ƒì´ë‹¤. 
    2.  Set-ExecutionPolicy RemoteSigned ì…ë ¥í•˜ì—¬ ë³€ê²½ì„ yë¡œ í—ˆë½í•˜ê³ 
    3. Get-ExecutionPolicy ë‹¤ì‹œí•´ë³´ë©´ RemoteSignedë¡œ ë³€ê²½ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
        
        ```powershell
         Get-ExecutionPolicy 
         //Restricted ê²°ê³¼ê°’
         Set-ExecutionPolicy RemoteSigned
         /*
         ì‹¤í–‰ ê·œì¹™ ë³€ê²½
        ì‹¤í–‰ ì •ì±…ì€ ì‹ ë¢°í•˜ì§€ ì•ŠëŠ” ìŠ¤í¬ë¦½íŠ¸ë¡œë¶€í„° ì‚¬ìš©ìë¥¼ ë³´í˜¸í•©ë‹ˆë‹¤. ì‹¤í–‰ ì •ì±…ì„ ë³€ê²½í•˜ë©´ about_Execution_Policies ë„ì›€ë§
        í•­ëª©(https://go.microsoft.com/fwlink/?LinkID=135170)ì— ì„¤ëª…ëœ ë³´ì•ˆ ìœ„í—˜ì— ë…¸ì¶œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹¤í–‰ ì •ì±…ì„
        ë³€ê²½í•˜ì‹œê² ìŠµë‹ˆê¹Œ?
        [Y] ì˜ˆ(Y)  [A] ëª¨ë‘ ì˜ˆ(A)  [N] ì•„ë‹ˆìš”(N)  [L] ëª¨ë‘ ì•„ë‹ˆìš”(L)  [S] ì¼ì‹œ ì¤‘ë‹¨(S)  [?] ë„ì›€ë§ (ê¸°ë³¸ê°’ì€ "N"): y
         */
         Y
         Get-ExecutionPolicy
         //RemoteSigned ë¡œ ë³€ê²½ ì™„ë£Œ
        ```
        
- expressë¥¼ ì…ë ¥í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ëœ¨ê³ , 
ğŸ“bin, public,routes, views
ğŸ“„app.js, package.json ì´ ìƒì„±ë˜ì—ˆì„ ê²ƒì´ë‹¤.

```powershell
 express     

  warning: the default view engine will not be jade in future releases
  warning: use `--view=jade' or `--help' for additional options   

   create : public\
   create : public\javascripts\
   create : public\images\
   create : public\stylesheets\
   create : public\stylesheets\style.css
   create : routes\
   create : routes\index.js
   create : routes\users.js
   create : views\
   create : views\error.jade
   create : views\index.jade
   create : views\layout.jade
   create : app.js
   create : package.json
   create : bin\
   create : bin\www

   install dependencies:
     > npm install

   run the app:
     > SET DEBUG=express-demo:* & npm start
```

## ğŸ“bin ğŸ“„www.js

```jsx
var app = require('../app');
var debug = require('debug')('express-demo:server');
var http = require('http'); 
/* expressì—ì„œ node.jsì˜ 
	 httpë‚´ì¥ ëª¨ë“ˆì„ ì‚¬ìš©í•¨ì„ ì•Œ ìˆ˜ ìˆìŒ */
	 

//í¬íŠ¸ ì„¤ì •
var port = normalizePort(process.env.PORT || '3000');
app.set('port', port);

/**
 * Create HTTP server.
 */

var server = http.createServer(app);

/**
 * Listen on provided port, on all network interfaces.
 */

server.listen(port);
server.on('error', onError);
server.on('listening', onListening);

```

### ğŸ“„app.js

```jsx
var createError = require('http-errors');
var express = require('express');
var path = require('path');
var cookieParser = require('cookie-parser');
//ì›¹ì‚¬ì´íŠ¸ê°€ ì‚¬ìš©ì ì •ë³´ë¥¼ ì €ì¥í•˜ê³  ë¶ˆëŸ¬ì˜¬ ë•Œ ì‚¬ìš©í•˜ëŠ” "ì¿ í‚¤"ë¥¼ ë‹¤ë£° ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ëª¨ë“ˆ

var logger = require('morgan');
//morgan: ì›¹ ì„œë²„ì— ìš”ì²­ì´ ë“¤ì–´ì˜¬ ë•Œë§ˆë‹¤ ê·¸ ì •ë³´ë¥¼ ë¡œê·¸ë¡œ ê¸°ë¡í•˜ê²Œ í•´ì£¼ëŠ” ëª¨ë“ˆ

var indexRouter = require('./routes/index');
var usersRouter = require('./routes/users');

var app = express();

// view engine setup
app.set('views', path.join(__dirname, 'views'));
app.set('view engine', 'jade');
/*
views
: HTML íŒŒì¼ ê°™ì€ í…œí”Œë¦¿ íŒŒì¼ì´ ì–´ë””ì— ìˆëŠ”ì§€ ì„¤ì •/
 ì—¬ê¸°ì„œëŠ” views í´ë”ì— ìˆë‹¤ê³  ì„¤ì •í•¨
 
view engine
: ë·° ì—”ì§„ì€ í…œí”Œë¦¿ íŒŒì¼ì„ ì‹¤ì œ HTMLë¡œ ë³€í™˜í•´ì£¼ëŠ” ì—­í• 
  Jadeë¼ëŠ” ë·° ì—”ì§„ì„ ì‚¬ìš©

*/

//ë¯¸ë“¤ì›¨ì–´ ì„¤ì •
app.use(logger('dev'));
app.use(express.json());
app.use(express.urlencoded({ extended: false }));
app.use(cookieParser());
app.use(express.static(path.join(__dirname, 'public')));

/*

logger('dev')
 : ìš”ì²­ì´ ë“¤ì–´ì˜¬ ë•Œë§ˆë‹¤ ê·¸ ì •ë³´ë¥¼ ì½˜ì†”ì— ì¶œë ¥í•´ì£¼ëŠ” ì—­í• 
express.json()
 : JSON í˜•ì‹ìœ¼ë¡œ ëœ ìš”ì²­ì˜ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ ë„ì™€ì¤Œ.
express.urlencoded({ extended: false })
: í¼(form)ìœ¼ë¡œ ì œì¶œëœ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ ë„ì›€.
cookieParser()
: ì¿ í‚¤ë¥¼ ë‹¤ë£° ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ë¯¸ë“¤ì›¨ì–´
express.static(path.join(__dirname, 'public'))
: public í´ë”ì— ìˆëŠ” íŒŒì¼ë“¤ì„ ì •ì  íŒŒì¼(ì´ë¯¸ì§€, CSS íŒŒì¼ ë“±)ë¡œ ì œê³µ

*/

app.use('/', indexRouter);
app.use('/users', usersRouter);
/* ê²½ë¡œë¥¼ ì—°ê²°í•˜ì—¬ ê°ê° ë¼ìš°í„°ë¡œ ì²˜ë¦¬ 

users.js
-----------------
var express = require('express');
var router = express.Router();

/* GET users listing. */
router.get('/', function(req, res, next) {
  res.send('respond with a resource');
});

module.exports = router;

*/

// catch 404 and forward to error handler
app.use(function(req, res, next) {
  next(createError(404));
})
// ìš”ì²­í•œ í˜ì´ì§€ë¥¼ ëª» ì°¾ì„ ë•Œ 404 ì—ëŸ¬ë¥¼ ë°œìƒ

// error handler
app.use(function(err, req, res, next) {
  // set locals, only providing error in development
  res.locals.message = err.message;
  res.locals.error = req.app.get('env') === 'development' ? err : {};

  // render the error page
  res.status(err.status || 500);
  res.render('error');
});

module.exports = app;

```

### ë¼ìš°í„°?

ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ **íŠ¹ì • URL ê²½ë¡œ**ì— ë”°ë¼ **ì–´ë–¤ ë™ì‘ì„ í• ì§€** ê²°ì •í•´ì£¼ëŠ” ê¸°ëŠ¥.ì›¹ì‚¬ì´íŠ¸ì—ì„œ ì£¼ì†Œ(ê²½ë¡œ)ë¥¼ ì…ë ¥í–ˆì„ ë•Œ ê·¸ ì£¼ì†Œì— ë§ëŠ” í˜ì´ì§€ë¥¼ ë³´ì—¬ì£¼ê±°ë‚˜, íŠ¹ì • ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ì—­í• ì„ í•¨. 

### ë¯¸ë“¤ì›¨ì–´? (express)

- ì›¹ í”„ë ˆì„ì›Œí¬(Express) ì—ì„œ ì„œë²„ë¡œ ë“¤ì–´ì˜¤ëŠ” **ìš”ì²­**(request)ê³¼ ì„œë²„ê°€ **ì‘ë‹µ**(response)ì„ ë³´ë‚´ê¸° ì „ì— **ì¤‘ê°„ì—ì„œ ê·¸ ìš”ì²­ê³¼ ì‘ë‹µì„ ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜**
    - ex) ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í–ˆëŠ”ì§€ í™•ì¸í•˜ê±°ë‚˜, ë°ì´í„°ë¥¼ ê°€ê³µí•˜ê±°ë‚˜, ìš”ì²­ì— ëŒ€í•œ ë¡œê·¸ë¥¼ ë‚¨ê¸°ëŠ” ë“± ë‹¤ì–‘í•œ ì‘ì—…ì„ ìˆ˜í–‰í•¨. <ì‚¬ìš©ìê°€ ì„œë²„ì— ìš”ì²­í•œ í›„, ê·¸ì— ëŒ€í•œ ì‘ë‹µì„ ë³´ë‚´ê¸° ì „ì— í–‰í•˜ëŠ” ì‘ì—…ë“¤. >
- ì¼ë°˜ì ì¸ ë¯¸ë“¤ì›¨ì–´ì˜ ì—­í• 
    1. **ë°ì´í„° ë³€í™˜ ë° í†µì‹ **: ì„œë¡œ ë‹¤ë¥¸ ì‹œìŠ¤í…œì´ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ì„ ë•Œ, ê·¸ ë°ì´í„° í˜•ì‹ì„ ë§ì¶”ê³  ì˜¬ë°”ë¥´ê²Œ ì „ë‹¬ë˜ë„ë¡ í•˜ëŠ” ì—­í• . 
        
        ex) aì‹œìŠ¤í…œì´ XML í˜•ì‹, Bì‹œìŠ¤í…œì´ JSON í˜•ì‹ì„ ì‚¬ìš©í•˜ë©´, ë¯¸ë“¤ì›¨ì–´ê°€ ì´ë“¤ ê°„ì˜ í˜•ì‹ ë³€í™˜ì„ ë‹´ë‹¹í•¨.
        
    2. **ì„œë¹„ìŠ¤ í†µí•©**: ì—¬ëŸ¬ ê°œì˜ ë…ë¦½ì ì¸ ì‹œìŠ¤í…œì´ë‚˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í•˜ë‚˜ì˜ í†µí•©ëœ ì„œë¹„ìŠ¤ë¡œ ë¬¶ì–´ì¤Œ
    ex)  ê³ ê° ê´€ë¦¬ ì‹œìŠ¤í…œ(CRM)ê³¼ ì£¼ë¬¸ ê´€ë¦¬ ì‹œìŠ¤í…œ(OMS)ì„ í†µí•©í•˜ì—¬ í•˜ë‚˜ì˜ í¬í„¸ì—ì„œ ì ‘ê·¼gí•˜ê²Œ í•¨.
    3. **ë³´ì•ˆ ê´€ë¦¬**: ë°ì´í„°ê°€ ì•ˆì „í•˜ê²Œ ì „ì†¡ë˜ë„ë¡ ì•”í˜¸í™”, ì ‘ê·¼ ì œì–´ë¥¼ í†µí•´ ê¶Œí•œì´ ì—†ëŠ” ì‚¬ìš©ìê°€ ë°ì´í„°ì— ì ‘ê·¼í•˜ì§€ ëª»í•˜ë„ë¡ í•¨.
    4. **ë¡œê¹… ë° ëª¨ë‹ˆí„°ë§**: ì‹œìŠ¤í…œ ê°„ì˜ í†µì‹ ì´ë‚˜ ì‘ì—…ì„ ê¸°ë¡í•˜ì—¬ ì¶”ì í•˜ê±°ë‚˜, ì‹œìŠ¤í…œ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•˜ëŠ” ê¸°ëŠ¥ì„ í•˜ê¸°ë„ í•¨.
    5. **ë©”ì‹œì§€ í**:  ì‹œìŠ¤í…œ ê°„ ë©”ì‹œì§€ ì „ë‹¬ì„ ê´€ë¦¬í•˜ëŠ” ë©”ì‹œì§€ íë¥¼ ì œê³µí•¨. 
    ex) A ì‹œìŠ¤í…œì´ ì‘ì—…ì„ ìš”ì²­ ì‹œ, ë¯¸ë“¤ì›¨ì–´ê°€ ê·¸ ë©”ì‹œì§€ë¥¼ ëŒ€ê¸°ì—´ì— ì¶”ê°€í•˜ê³ , B ì‹œìŠ¤í…œì´ ê·¸ ë©”ì‹œì§€ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ ê´€ë¦¬ í•¨.